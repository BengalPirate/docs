<p>
    Appwrite Functions are mini application in Appwrite with their own endpoint. 
    Each function can have many deployments, which can be thought of as versions of the mini-application.
</p>

<p>
    Functions can be deployed in different ways to meet your unique development habbits.
    You can automatically deploy Appwrite Functions from source control, build your own deployment pipelines using the Appwrite CLI, or upload code files manually.
    Here's everything you need to know to deploy your first Appwrite Function.
</p>

<h2><a href="#Git" id="Git">Git</a></h2>
<p>
    The recommended way to manage your Appwrite Function deployments is to use Git.
    This offers simple versioning and collaboration that will easily fit into the rest of your development workflow.
</p>

[TODO: Describe how to create a GitHub deployment]

<h3>Create</h3>
- Install Appwrite on your GitHub account/organization 
- Select a repository
- Select a production branch
- Define root directory
- Silent mode -> No comments on PRs
- Build commands 
<h3>Deploy</h3>
- Prod branch is automatically deployed on push and activated
    - Non prod branches are also built but not activated automatically
- Push to branch
<h3>Debugging Builds</h3>
- Check logs and errors
- Redeploy button for non-code issues [TODO: @matej write an example]

<h3><a href="#templates" id="templates">Templates</a></h3>
- Select repo -> Specify path
- Make repository

<h2><a href="#cli" id="cli">CLI</a></h2>
- Setup cli
<p>
    To deploy with the Appwrite CLI, your function's folder structure must be configured in a specific way. 
    The folder path is then added to a config file called <code>appwrite.json</code> that tells the CLI where each function is stored.
    To ensure the folder structure is setup correctly and <code>appwrite.json</code> is configured correctly, use the appwrite init function method to create a shell function.
</p>
<div class="ide margin-bottom" data-lang="bash" data-lang-label="Bash">
    <pre class="line-numbers"><code class="prism language-bash" data-prism>appwrite init function</code></pre>
</div>

<p>
    Give your function a name and choose your runtime. 
    This will create a new starter function in the current directory and also add it to your <code>appwrite.json</code> file.
</p>

<p>
    Edit the automatically generated code and add dependencies to the dependency files of your language or framework.
    Then, deploy the function using the following command.
</p>

<div class="ide margin-bottom" data-lang="bash" data-lang-label="Bash">
    <pre class="line-numbers"><code class="prism language-bash" data-prism>appwrite deploy function</code></pre>
</div>

<h3>Manual Deployment</h3>
<p>You can also upload your functions to be deployed using the Appwrite console. The example below shows a simple Node.JS function, but the same idea applies to any other language.</p>

<div class="ide margin-bottom">
    <pre class="line-numbers"><code class="prism" data-prism>.
├── package.json
└── index.js
</code></pre>
</div>

<p>First, navigate inside the folder that contains your dependency file. Package your code files into the <code>.tar.gz</code> format with this tar command:</p>

<ul class="phases clear" data-ui-phases>
    <li>
        <h3>Unix</h3>

        <div class="ide margin-bottom" data-lang="bash" data-lang-label="Bash">
            <pre class="line-numbers"><code class="prism language-bash" data-prism>tar --exclude code.tar.gz -czf code.tar.gz .</code></pre>
        </div>
    </li>
    <li>
        <h3>CMD</h3>

        <div class="ide margin-bottom" data-lang="bash" data-lang-label="CMD">
            <pre class="line-numbers"><code class="prism language-bash" data-prism>tar --exclude code.tar.gz -czf code.tar.gz .</code></pre>
        </div>
    </li>
    <li>
        <h3>PowerShell</h3>

        <div class="ide margin-bottom" data-lang="bash" data-lang-label="PowerShell">
            <pre class="line-numbers"><code class="prism language-bash" data-prism>tar --exclude code.tar.gz -czf code.tar.gz .</code></pre>
        </div>
    </li>
</ul>

<p>Next, navigate to your Appwrite console and upload the function.</p>

<ol class="margin-top margin-bottom-large text-size-normal">
  <li class="margin-bottom-small">Navigate to the function you want to deploy.</li>
  <li class="margin-bottom-small">Click <i class="icon-plus"></i> <b>Create deployment</b>.</li>
  <li class="margin-bottom-small">Select the <b>Manual</b> tab.</li>
  <li class="margin-bottom-small">Input the entry point of your function under <b>Entrypoint</b>. For the example above, it would be <code>index.js</code>.</li>
  <li class="margin-bottom-small">Upload <code> code.tar.gz</code>.</li>
  <li class="margin-bottom-small">Select <b>Activate deployment after build</b> to use your new function.</li>
  <li class="margin-bottom-small">Click <b>Create</b> to deploy your function.</li>
</ol>